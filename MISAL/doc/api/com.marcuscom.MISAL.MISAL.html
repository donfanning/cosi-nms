<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<!--NewPage-->
<html>
<head>
<!-- Generated by javadoc on Thu Jun 14 14:29:15 EDT 2001 -->
<title>
  Class com.marcuscom.MISAL.MISAL
</title>
</head>
<body>
<a name="_top_"></a>
<pre>
<a href="packages.html">All Packages</a>  <a href="tree.html">Class Hierarchy</a>  <a href="Package-com.marcuscom.MISAL.html">This Package</a>  <a href="com.marcuscom.MISAL.InsufficientCredentialsException.html#_top_">Previous</a>  <a href="com.marcuscom.MISAL.MISALCiscoIOS.html#_top_">Next</a>  <a href="AllNames.html">Index</a></pre>
<hr>
<h1>
  Class com.marcuscom.MISAL.MISAL
</h1>
<pre>
java.lang.Object
   |
   +----com.marcuscom.MISAL.MISAL
</pre>
<hr>
<dl>
  <dt> public class <b>MISAL</b>
  <dt> extends Object
  <dt> implements Runnable
</dl>
-
 Copyright &copy; 2001 Joe Clarke &lt;marcus@marcuscom.com&gt;
 All rights reserved.
 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions
 are met:
 <ol>
 <li>Redistributions of source code must retain the above copyright
    notice, this list of conditions and the following disclaimer.</li>
 <li>Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the
    documentation and/or other materials provided with the distribution.</li>
 <p>
 THIS SOFTWARE IS PROVIDED BY THE AUTHOR AND CONTRIBUTORS ``AS IS'' AND
 ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 ARE DISCLAIMED.  IN NO EVENT SHALL THE AUTHOR OR CONTRIBUTORS BE LIABLE
 FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
 DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
 OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
 HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
 LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
 OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
 SUCH DAMAGE.
 </p>
 $Id$
 <p>
 MISAL is the MarcusCom Intelligent Socket Abstraction Library.<br>
 It is designed to make interacting with TCP sockets (such as telnet)
 much easier.</p>
<p>
<hr>
<a name="index"></a>
<h2>
  <img src="images/variable-index.gif" width=207 height=38 alt="Variable Index">
</h2>
<dl>
  <dt> <img src="images/blue-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#DEFAULT_BUFFER_SIZE"><b>DEFAULT_BUFFER_SIZE</b></a>
  <dd> 
  <dt> <img src="images/blue-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#DEFAULT_RETRIES"><b>DEFAULT_RETRIES</b></a>
  <dd> 
  <dt> <img src="images/blue-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#MISAL_DEFAULT_SLEEP_INTERVAL"><b>MISAL_DEFAULT_SLEEP_INTERVAL</b></a>
  <dd> 
  <dt> <img src="images/blue-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#MISAL_SHORT_THREAD_SLEEP_INTERVAL"><b>MISAL_SHORT_THREAD_SLEEP_INTERVAL</b></a>
  <dd> 
  <dt> <img src="images/blue-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#MISAL_STATE_CLOSED"><b>MISAL_STATE_CLOSED</b></a>
  <dd> 
  <dt> <img src="images/blue-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#MISAL_STATE_UNKNOWN"><b>MISAL_STATE_UNKNOWN</b></a>
  <dd> 
  <dt> <img src="images/blue-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#MISAL_THREAD_SLEEP_INTERVAL"><b>MISAL_THREAD_SLEEP_INTERVAL</b></a>
  <dd> 
</dl>
<h2>
  <img src="images/constructor-index.gif" width=275 height=38 alt="Constructor Index">
</h2>
<dl>
  <dt> <img src="images/yellow-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#MISAL(java.net.Socket)"><b>MISAL</b></a>(Socket)
  <dd>  Create a new MISAL socket.
</dl>
<h2>
  <img src="images/method-index.gif" width=207 height=38 alt="Method Index">
</h2>
<dl>
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#addState(int, java.lang.String)"><b>addState</b></a>(int, String)
  <dd>  Add a new MISAL state to the state table.
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#clearBuffer()"><b>clearBuffer</b></a>()
  <dd> 
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#closeSocket()"><b>closeSocket</b></a>()
  <dd> 
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#debug(java.lang.String)"><b>debug</b></a>(String)
  <dd> 
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#expect(int)"><b>expect</b></a>(int)
  <dd> 
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#expect(int, int)"><b>expect</b></a>(int, int)
  <dd> 
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#expect(java.lang.String)"><b>expect</b></a>(String)
  <dd> 
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#expect(java.lang.String, int)"><b>expect</b></a>(String, int)
  <dd> 
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#getBuffer()"><b>getBuffer</b></a>()
  <dd> 
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#getBufferSize()"><b>getBufferSize</b></a>()
  <dd> 
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#getDebug()"><b>getDebug</b></a>()
  <dd> 
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#getInputStream()"><b>getInputStream</b></a>()
  <dd>  Get the MISAL socket's output stream as a
 java.io.BufferedOutputStream.
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#getOutputStream()"><b>getOutputStream</b></a>()
  <dd>  Get the MISAL socket's input stream as a
 java.io.BufferedInputStream.
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#getSleepInterval()"><b>getSleepInterval</b></a>()
  <dd> 
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#getState()"><b>getState</b></a>()
  <dd> 
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#removeState(int)"><b>removeState</b></a>(int)
  <dd> 
 Remove a MISAL state from the state machine.
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#run()"><b>run</b></a>()
  <dd> 
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#send(int, java.lang.String, int)"><b>send</b></a>(int, String, int)
  <dd> 
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#send(int, java.lang.String, int, int)"><b>send</b></a>(int, String, int, int)
  <dd> 
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#send(int, java.lang.String, java.lang.String)"><b>send</b></a>(int, String, String)
  <dd> 
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#send(int, java.lang.String, java.lang.String, int)"><b>send</b></a>(int, String, String, int)
  <dd> 
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#send(int, java.lang.String, java.lang.String, int, int)"><b>send</b></a>(int, String, String, int, int)
  <dd> 
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#setBufferSize(int)"><b>setBufferSize</b></a>(int)
  <dd> 
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#setSleepInterval(int)"><b>setSleepInterval</b></a>(int)
  <dd> 
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#startCheckingState()"><b>startCheckingState</b></a>()
  <dd>  Start the state checking thread.
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#stopCheckingState()"><b>stopCheckingState</b></a>()
  <dd> 
  <dt> <img src="images/red-ball-small.gif" width=6 height=6 alt=" o ">
	<a href="#toggleDebug()"><b>toggleDebug</b></a>()
  <dd> 
</dl>
<a name="variables"></a>
<h2>
  <img src="images/variables.gif" width=153 height=38 alt="Variables">
</h2>
<a name="MISAL_STATE_UNKNOWN"><img src="images/blue-ball.gif" width=12 height=12 alt=" o "></a>
<b>MISAL_STATE_UNKNOWN</b>
<pre>
 public static final int MISAL_STATE_UNKNOWN
</pre>
<a name="MISAL_STATE_CLOSED"><img src="images/blue-ball.gif" width=12 height=12 alt=" o "></a>
<b>MISAL_STATE_CLOSED</b>
<pre>
 public static final int MISAL_STATE_CLOSED
</pre>
<a name="MISAL_DEFAULT_SLEEP_INTERVAL"><img src="images/blue-ball.gif" width=12 height=12 alt=" o "></a>
<b>MISAL_DEFAULT_SLEEP_INTERVAL</b>
<pre>
 protected static final int MISAL_DEFAULT_SLEEP_INTERVAL
</pre>
<a name="MISAL_THREAD_SLEEP_INTERVAL"><img src="images/blue-ball.gif" width=12 height=12 alt=" o "></a>
<b>MISAL_THREAD_SLEEP_INTERVAL</b>
<pre>
 protected static final int MISAL_THREAD_SLEEP_INTERVAL
</pre>
<a name="MISAL_SHORT_THREAD_SLEEP_INTERVAL"><img src="images/blue-ball.gif" width=12 height=12 alt=" o "></a>
<b>MISAL_SHORT_THREAD_SLEEP_INTERVAL</b>
<pre>
 protected static final int MISAL_SHORT_THREAD_SLEEP_INTERVAL
</pre>
<a name="DEFAULT_RETRIES"><img src="images/blue-ball.gif" width=12 height=12 alt=" o "></a>
<b>DEFAULT_RETRIES</b>
<pre>
 protected static final int DEFAULT_RETRIES
</pre>
<a name="DEFAULT_BUFFER_SIZE"><img src="images/blue-ball.gif" width=12 height=12 alt=" o "></a>
<b>DEFAULT_BUFFER_SIZE</b>
<pre>
 protected static final int DEFAULT_BUFFER_SIZE
</pre>
<a name="constructors"></a>
<h2>
  <img src="images/constructors.gif" width=231 height=38 alt="Constructors">
</h2>
<a name="MISAL"></a>
<a name="MISAL(java.net.Socket)"><img src="images/yellow-ball.gif" width=12 height=12 alt=" o "></a>
<b>MISAL</b>
<pre>
 public MISAL(Socket socket) throws SocketException, IOException
</pre>
<dl>
  <dd> Create a new MISAL socket.
<p>
  <dd><dl>
    <dt> <b>Parameters:</b>
    <dd> socket - the <em>open</em> java.net.Socket to be
			abstracted
    <dt> <b>See Also:</b>
    <dd> Socket
  </dl></dd>
</dl>
<a name="methods"></a>
<h2>
  <img src="images/methods.gif" width=151 height=38 alt="Methods">
</h2>
<a name="getInputStream()"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="getInputStream"><b>getInputStream</b></a>
<pre>
 protected BufferedInputStream getInputStream()
</pre>
<dl>
  <dd> Get the MISAL socket's output stream as a
 java.io.BufferedOutputStream.
<p>
  <dd><dl>
    <dt> <b>Returns:</b>
    <dd> java.io.BufferedOutputStream
    <dt> <b>See Also:</b>
    <dd> getOutputStream, BufferedOutputStream
  </dl></dd>
</dl>
<a name="getOutputStream()"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="getOutputStream"><b>getOutputStream</b></a>
<pre>
 protected BufferedOutputStream getOutputStream()
</pre>
<dl>
  <dd> Get the MISAL socket's input stream as a
 java.io.BufferedInputStream.
<p>
  <dd><dl>
    <dt> <b>Returns:</b>
    <dd> java.io.BufferedInputStream
    <dt> <b>See Also:</b>
    <dd> getInputStream, BufferedInputStream
  </dl></dd>
</dl>
<a name="addState(int, java.lang.String)"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="addState"><b>addState</b></a>
<pre>
 public synchronized void addState(int state,
                                   String prompt) throws MalformedPatternException
</pre>
<dl>
  <dd> Add a new MISAL state to the state table.  MISAL states are used
 by the state reading/setting thread to indicate where the socket
 is.  For example, a state can be identified by the regular
 expression <code>/login: ?$/</code> and a constant 
 STATE_LOGIN_PROMPT.
<p>
  <dd><dl>
    <dt> <b>Parameters:</b>
    <dd> state - an integer (usually defined as a constant)
			that uniquely identifies this state.  Classes
			extending MISAL can start their state numbering
			at 1.
    <dd> prompt - a Perl regular expression, in the form of a
			String.  When this expression is matched, the
			MISAL state will be set to the value of the
			<code>state</code> argument
    <dt> <b>Throws:</b> MalformedPatternException
    <dd> if the prompt is not a valid Perl regular expression.
    <dt> <b>See Also:</b>
    <dd> <a href="#removeState">removeState</a>, Pattern
  </dl></dd>
</dl>
<a name="removeState(int)"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="removeState"><b>removeState</b></a>
<pre>
 public synchronized void removeState(int state)
</pre>
<dl>
  <dd> Remove a MISAL state from the state machine.
<p>
  <dd><dl>
    <dt> <b>Parameters:</b>
    <dd> state - integer representing the state to remove
    <dt> <b>See Also:</b>
    <dd> <a href="#addState">addState</a>
  </dl></dd>
</dl>
<a name="startCheckingState()"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="startCheckingState"><b>startCheckingState</b></a>
<pre>
 protected void startCheckingState()
</pre>
<dl>
  <dd> Start the state checking thread.
<p>
  <dd><dl>
    <dt> <b>See Also:</b>
    <dd> <a href="#stopCheckingState">stopCheckingState</a>
  </dl></dd>
</dl>
<a name="stopCheckingState()"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="stopCheckingState"><b>stopCheckingState</b></a>
<pre>
 protected void stopCheckingState()
</pre>
<a name="run()"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="run"><b>run</b></a>
<pre>
 public void run()
</pre>
<a name="setSleepInterval(int)"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="setSleepInterval"><b>setSleepInterval</b></a>
<pre>
 protected void setSleepInterval(int interval)
</pre>
<a name="getSleepInterval()"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="getSleepInterval"><b>getSleepInterval</b></a>
<pre>
 protected int getSleepInterval()
</pre>
<a name="getState()"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="getState"><b>getState</b></a>
<pre>
 public synchronized int getState()
</pre>
<a name="getBufferSize()"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="getBufferSize"><b>getBufferSize</b></a>
<pre>
 public synchronized int getBufferSize()
</pre>
<a name="setBufferSize(int)"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="setBufferSize"><b>setBufferSize</b></a>
<pre>
 public synchronized void setBufferSize(int size)
</pre>
<a name="clearBuffer()"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="clearBuffer"><b>clearBuffer</b></a>
<pre>
 public synchronized void clearBuffer()
</pre>
<a name="getBuffer()"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="getBuffer"><b>getBuffer</b></a>
<pre>
 public synchronized String getBuffer()
</pre>
<a name="getDebug()"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="getDebug"><b>getDebug</b></a>
<pre>
 public synchronized boolean getDebug()
</pre>
<a name="toggleDebug()"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="toggleDebug"><b>toggleDebug</b></a>
<pre>
 public synchronized boolean toggleDebug()
</pre>
<a name="send(int, java.lang.String, java.lang.String)"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="send"><b>send</b></a>
<pre>
 public void send(int state,
                  String data,
                  String expect) throws <a href="com.marcuscom.MISAL.IllegalMISALStateException.html#_top_">IllegalMISALStateException</a>, IOException
</pre>
<a name="send(int, java.lang.String, int)"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="send"><b>send</b></a>
<pre>
 public void send(int state,
                  String data,
                  int expectState) throws <a href="com.marcuscom.MISAL.IllegalMISALStateException.html#_top_">IllegalMISALStateException</a>, IOException
</pre>
<a name="send(int, java.lang.String, java.lang.String, int)"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="send"><b>send</b></a>
<pre>
 public void send(int state,
                  String data,
                  String expect,
                  int wait) throws <a href="com.marcuscom.MISAL.IllegalMISALStateException.html#_top_">IllegalMISALStateException</a>, IOException
</pre>
<a name="send(int, java.lang.String, int, int)"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="send"><b>send</b></a>
<pre>
 public void send(int state,
                  String data,
                  int expectState,
                  int wait) throws <a href="com.marcuscom.MISAL.IllegalMISALStateException.html#_top_">IllegalMISALStateException</a>, IOException
</pre>
<a name="send(int, java.lang.String, java.lang.String, int, int)"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="send"><b>send</b></a>
<pre>
 protected void send(int state,
                     String data,
                     String expect,
                     int expectState,
                     int wait) throws <a href="com.marcuscom.MISAL.IllegalMISALStateException.html#_top_">IllegalMISALStateException</a>, IOException
</pre>
<a name="expect(int)"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="expect"><b>expect</b></a>
<pre>
 protected boolean expect(int state)
</pre>
<a name="expect(java.lang.String)"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="expect"><b>expect</b></a>
<pre>
 protected boolean expect(String prompt)
</pre>
<a name="expect(int, int)"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="expect"><b>expect</b></a>
<pre>
 protected boolean expect(int state,
                          int tries)
</pre>
<a name="expect(java.lang.String, int)"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="expect"><b>expect</b></a>
<pre>
 protected boolean expect(String prompt,
                          int tries)
</pre>
<a name="debug(java.lang.String)"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="debug"><b>debug</b></a>
<pre>
 public void debug(String msg)
</pre>
<a name="closeSocket()"><img src="images/red-ball.gif" width=12 height=12 alt=" o "></a>
<a name="closeSocket"><b>closeSocket</b></a>
<pre>
 public void closeSocket()
</pre>
<hr>
<pre>
<a href="packages.html">All Packages</a>  <a href="tree.html">Class Hierarchy</a>  <a href="Package-com.marcuscom.MISAL.html">This Package</a>  <a href="com.marcuscom.MISAL.InsufficientCredentialsException.html#_top_">Previous</a>  <a href="com.marcuscom.MISAL.MISALCiscoIOS.html#_top_">Next</a>  <a href="AllNames.html">Index</a></pre>
</body>
</html>
